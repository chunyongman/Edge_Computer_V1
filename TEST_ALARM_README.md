# 🧪 알람 & VFD 이상 징후 테스트 가이드

## 📋 개요
이 테스트 스크립트는 **랜덤 알람과 VFD 이상 징후를 주기적으로 발생**시켜 시스템의 알람 관리 및 VFD 진단 기능을 테스트할 수 있습니다.

## 🚀 사용 방법

### 1. 테스트 생성기 실행

```bash
cd C:\Users\my\Desktop\Edge_Computer_V1
python test_alarm_vfd_generator.py
```

### 2. 실행 화면

```
======================================================================
🧪 알람 & VFD 이상 징후 생성기 시작
======================================================================
📁 공유 디렉토리: C:\shared
⏰ 알람 발생 확률: 20% (10초마다)
⚠️  VFD 이상 발생 확률: 15% (10초마다)
✅ 자동 해제: 30-60초 후
======================================================================

🚨 [알람 발생] WARNING - 엔진룸 고온 경고
⚠️  [VFD 이상] SWP2 - VFD 경고 발생 (건강도: 40)
```

## 📊 테스트 항목

### 알람 테스트
- **알람 탭에서 확인**:
  - 새로운 알람 발생 시 실시간 표시
  - 알람 레벨(CRITICAL, WARNING, CAUTION) 표시
  - "확인" 버튼 클릭 → 확인됨 상태로 변경
  - 30-60초 후 자동 해제

### VFD 진단 테스트
- **VFD 예방진단 탭에서 확인**:
  - VFD 건강도 현황판에 이상 표시 (건강도 40 = 경고)
  - 이상 징후 탐지 섹션에 경고 메시지 표시
  - "확인" 버튼 클릭 → 노란색 배경으로 변경 + "✓ 확인됨" 표시
  - "해제" 버튼 클릭 → 히스토리로 이동
  - 40-70초 후 자동 정상화 (WARNING 비트 해제)
  - 정상화 후 10분 경과 → 자동 해제 (히스토리로 이동)

## 🧪 발생 가능한 알람

| 알람 ID | 레벨 | 메시지 |
|--------|------|--------|
| HIGH_TEMP | WARNING | 엔진룸 고온 경고 |
| LOW_PRESSURE | WARNING | 냉각수 압력 저하 |
| VIBRATION | CAUTION | 진동 수치 상승 |
| PUMP_FAULT | CRITICAL | 펌프 고장 감지 |
| FAN_OVERLOAD | WARNING | 팬 과부하 |
| POWER_SURGE | CRITICAL | 전력 서지 감지 |
| COOLANT_LOW | WARNING | 냉각수 부족 |
| FILTER_CLOG | CAUTION | 필터 막힘 감지 |

## ⚠️ 발생 가능한 VFD 이상

| 패턴 | Severity | 건강도 | 메시지 |
|------|----------|--------|--------|
| VFD_WARNING | 60 | 40 | VFD 경고 발생 |
| MOTOR_TEMP_HIGH | 55 | 45 | 모터 온도 상승 |
| HEATSINK_OVERTEMP | 50 | 50 | 히트싱크 과열 |
| VOLTAGE_FLUCTUATION | 45 | 55 | 전압 변동 |

## 📂 생성 파일

- `C:/shared/test_alarms.json`: 활성 알람 데이터
- `C:/shared/test_vfd_anomalies.json`: 활성 VFD 이상 데이터

## ⏹️ 중지 방법

**Ctrl+C** 키를 눌러 테스트 생성기를 중지합니다.

## 🔄 통합 테스트 시나리오

### 시나리오 1: 알람 관리 테스트
1. 테스트 생성기 실행
2. HMI Frontend (port 5173) 알람 탭 열기
3. 알람 발생 확인
4. "확인" 버튼 클릭
5. 확인됨 상태 확인
6. 30-60초 후 자동 해제 확인

### 시나리오 2: VFD 진단 테스트
1. 테스트 생성기 실행
2. Edge Computer Dashboard (port 8501) VFD 예방진단 탭 열기
3. HMI Frontend (port 5173) VFD 예방진단 열기
4. VFD 이상 발생 확인 (건강도 40, 경고)
5. "확인" 버튼 클릭
6. 노란색 배경 + "✓ 확인됨" 표시 확인
7. "해제" 버튼 클릭 (선택)
8. 히스토리에서 확인

### 시나리오 3: 자동 해제 테스트
1. VFD 이상 발생 후 "확인" 클릭
2. 40-70초 대기 (WARNING 비트 자동 해제)
3. 10분 대기 (자동 clear → 히스토리로 이동)
4. 히스토리 섹션에서 확인

## 📝 주의사항

- Edge Computer와 HMI Backend가 실행 중이어야 합니다
- 테스트 생성기는 별도 터미널에서 실행하세요
- 실제 PLC와 연결된 환경에서는 사용하지 마세요 (테스트 전용)
